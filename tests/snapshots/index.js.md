# Snapshot report for `tests/index.js`

The actual snapshot is saved in `index.js.snap`.

Generated by [AVA](https://avajs.dev).

## action-deprecated-inputs.test.js

> stderr

    ''

> stdout

    `app_id — 'app_id' is deprecated and will be removed in a future version. Use 'app-id' instead.␊
    private_key — 'private_key' is deprecated and will be removed in a future version. Use 'private-key' instead.␊
    skip_token_revoke — 'skip_token_revoke' is deprecated and will be removed in a future version. Use 'skip-token-revoke' instead.`

## main-custom-github-api-url.test.js

> stderr

    `(node:93330) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    `owner and repositories set, creating token for repositories "create-github-app-token" owned by "actions"␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z`

## main-missing-app-id.test.js

> stderr

    `Input required and not supplied: app-id␊
    (node:93340) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    ''

## main-missing-owner.test.js

> stderr

    `GITHUB_REPOSITORY_OWNER missing, must be set to '<owner>'␊
    (node:93349) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    ''

## main-missing-private-key.test.js

> stderr

    `Input required and not supplied: private-key␊
    (node:93358) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    ''

## main-missing-repository.test.js

> stderr

    `GITHUB_REPOSITORY missing, must be set to '<owner>/<repo>'␊
    (node:93367) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    ''

## main-private-key-with-escaped-newlines.test.js

> stderr

    `(node:93376) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    `owner and repositories not set, creating token for the current repository ("create-github-app-token")␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z`

## main-repo-skew.test.js

> stderr

    `(node:93385) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)␊
    'Issued at' claim ('iat') must be an Integer representing the time that the assertion was issued.␊
    [@octokit/auth-app] GitHub API time and system time are different by 30 seconds. Retrying request with the difference accounted for.`

> stdout

    `owner and repositories set, creating token for repositories "failed-repo" owned by "actions"␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z`

## main-token-get-owner-set-fail-response.test.js

> stderr

    `(node:93394) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    `repositories not set, creating token for all repositories for given owner "smockle"␊
    Failed to create token for "smockle" (attempt 1): GitHub API not available␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z`

## main-token-get-owner-set-repo-fail-response.test.js

> stderr

    `(node:93403) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    `owner and repositories set, creating token for repositories "failed-repo" owned by "actions"␊
    Failed to create token for "failed-repo" (attempt 1): GitHub API not available␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z`

## main-token-get-owner-set-repo-set-to-many-newline.test.js

> stderr

    `(node:93412) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    `owner and repositories set, creating token for repositories "create-github-app-token,toolkit,checkout" owned by "actions"␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z`

## main-token-get-owner-set-repo-set-to-many.test.js

> stderr

    `(node:93421) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    `owner and repositories set, creating token for repositories "create-github-app-token,toolkit,checkout" owned by "actions"␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z`

## main-token-get-owner-set-repo-set-to-one.test.js

> stderr

    `(node:93430) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    `owner and repositories set, creating token for repositories "create-github-app-token" owned by "actions"␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z`

## main-token-get-owner-set-repo-unset.test.js

> stderr

    `(node:93439) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    `repositories not set, creating token for all repositories for given owner "actions"␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z`

## main-token-get-owner-unset-repo-set.test.js

> stderr

    `(node:93448) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    `owner not set, creating owner for given repositories "create-github-app-token" in current owner ("actions")␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z`

## main-token-get-owner-unset-repo-unset.test.js

> stderr

    `(node:93457) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    `owner and repositories not set, creating token for the current repository ("create-github-app-token")␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z`

## post-revoke-token-fail-response.test.js

> stderr

    `(node:93466) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    '::warning::Token revocation failed: '

## post-token-expired.test.js

> stderr

    `(node:93475) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    'Token expired, skipping token revocation'

## post-token-set.test.js

> stderr

    `(node:93484) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    'Token revoked'

## post-token-skipped.test.js

> stderr

    `(node:93493) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    'Token revocation was skipped'

## post-token-unset.test.js

> stderr

    `(node:93502) [UNDICI-EHPA] Warning: EnvHttpProxyAgent is experimental, expect them to change at any time.␊
    (Use \`node --trace-warnings ...\` to show where the warning was created)`

> stdout

    'Token is not set'
