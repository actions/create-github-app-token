# Snapshot report for `tests/index.js`

The actual snapshot is saved in `index.js.snap`.

Generated by [AVA](https://avajs.dev).

## action-deprecated-inputs.test.js

> stderr

    ''

> stdout

    `app_id — 'app_id' is deprecated and will be removed in a future version. Use 'app-id' instead.␊
    kms_key_id — 'kms_key_id' is deprecated and will be removed in a future version. Use 'kms-key-id' instead.␊
    skip_token_revoke — 'skip_token_revoke' is deprecated and will be removed in a future version. Use 'skip-token-revoke' instead.`

## main-custom-github-api-url.test.js

> stderr

    'Error signing JWT: Region is missing'

> stdout

    `owner and repositories set, creating token for repositories "lepadatu-org/create-github-app-token-aws" owned by "lepadatu-org"␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::`

## main-missing-app-id.test.js

> stderr

    'Input required and not supplied: app-id'

> stdout

    ''

## main-missing-kms-key-id.test.js

> stderr

    'Input required and not supplied: kms-key-id'

> stdout

    ''

## main-missing-owner.test.js

> stderr

    'GITHUB_REPOSITORY_OWNER missing, must be set to \'<owner>\''

> stdout

    ''

## main-missing-private-key.test.js

> stderr

    'Input required and not supplied: kms-key-id'

> stdout

    ''

## main-missing-repository.test.js

> stderr

    'GITHUB_REPOSITORY missing, must be set to \'<owner>/<repo>\''

> stdout

    ''

## main-token-get-installation-access-token-fail-response.test.js

> stderr

    'Error signing JWT: Region is missing'

> stdout

    `owner and repositories set, creating token for repositories "lepadatu-org/create-github-app-token-aws" owned by "lepadatu-org"␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::`

## main-token-get-owner-set-repo-fail-response.test.js

> stderr

    'Error signing JWT: Region is missing'

> stdout

    `owner and repositories set, creating token for repositories "failed-repo" owned by "actions"␊
    Failed to create token for "failed-repo" (attempt 1): GitHub API not available␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::`

## main-token-get-owner-set-repo-set-to-many.test.js

> stderr

    'Error signing JWT: Region is missing'

> stdout

    `owner and repositories set, creating token for repositories "lepadatu-org/create-github-app-token-aws,actions/toolkit" owned by "lepadatu-org"␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::`

## main-token-get-owner-set-repo-set-to-one.test.js

> stderr

    'Error signing JWT: Region is missing'

> stdout

    `owner and repositories set, creating token for repositories "lepadatu-org/create-github-app-token-aws" owned by "lepadatu-org"␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::`

## main-token-get-owner-set-to-org-repo-unset.test.js

> stderr

    'Error signing JWT: Region is missing'

> stdout

    `repositories not set, creating token for all repositories for given owner "lepadatu-org"␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::`

## main-token-get-owner-set-to-user-fail-response.test.js

> stderr

    'Error signing JWT: Region is missing'

> stdout

    `repositories not set, creating token for all repositories for given owner "smockle"␊
    Failed to create token for "smockle" (attempt 1): GitHub API not available␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::`

## main-token-get-owner-set-to-user-repo-unset.test.js

> stderr

    'Error signing JWT: Region is missing'

> stdout

    `repositories not set, creating token for all repositories for given owner "smockle"␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::`

## main-token-get-owner-unset-repo-set.test.js

> stderr

    'Error signing JWT: Region is missing'

> stdout

    `owner not set, creating owner for given repositories "lepadatu-org/create-github-app-token-aws" in current owner ("lepadatu-org")␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::`

## main-token-get-owner-unset-repo-unset.test.js

> stderr

    'Error signing JWT: Region is missing'

> stdout

    `owner and repositories not set, creating token for the current repository ("create-github-app-token-aws")␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::`

## post-revoke-token-fail-response.test.js

> stderr

    ''

> stdout

    '::warning::Token revocation failed: '

## post-token-expired.test.js

> stderr

    ''

> stdout

    'Token expired, skipping token revocation'

## post-token-set.test.js

> stderr

    ''

> stdout

    'Token revoked'

## post-token-skipped.test.js

> stderr

    ''

> stdout

    'Token revocation was skipped'

## post-token-unset.test.js

> stderr

    ''

> stdout

    'Token is not set'
